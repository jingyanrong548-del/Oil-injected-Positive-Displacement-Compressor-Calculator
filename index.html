<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–·æ²¹å®¹ç§¯å¼å‹ç¼©æœºè®¡ç®—å™¨ v2.3 (é€»è¾‘å¢å¼ºç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* === é€šç”¨å±å¹•æ ·å¼ === */
        .input-group { margin-bottom: 0.75rem; }
        input[type="radio"] { margin-top: -0.1rem; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .tooltip { position: relative; cursor: help; display: inline-block; margin-left: 4px; color: #4A90E2; border-bottom: 1px dotted #4A90E2; font-weight: bold; }
        .tooltip .tooltiptext { visibility: hidden; width: 260px; background-color: #262626; color: #fff; text-align: left; border-radius: 6px; padding: 8px 12px; position: absolute; z-index: 10; bottom: 125%; left: 50%; margin-left: -130px; opacity: 0; transition: opacity 0.3s; font-size: 0.8rem; font-family: sans-serif; font-weight: normal; line-height: 1.4; }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
        .tab-button { padding: 0.75rem 1.25rem; border: 2px solid transparent; border-bottom: none; cursor: pointer; font-size: 1.1rem; font-weight: 600; color: #4b5563; background-color: #f3f4f6; border-radius: 6px 6px 0 0; }
        .tab-button.active { color: #1d4ed8; background-color: #ffffff; border-color: #d1d5db; border-bottom: 2px solid #ffffff; margin-bottom: -2px; }
        .tab-content { display: none; border: 2px solid #d1d5db; border-radius: 0 6px 6px 6px; background-color: #ffffff; }
        .tab-content.active { display: block; }
        
        /* === [v3.2 Safari/Chrome æ‰“å°æœ€ç»ˆä¿®å¤] === */
        @media print {
            /* 1. æ ¸å¿ƒä¿®å¤ï¼šä½¿ç”¨ display: none å½»åº•ç§»é™¤ç½‘é¡µä¸»ä½“ï¼Œé‡Šæ”¾ç©ºé—´ */
            #main-content, footer, .tab-button, nav, header {
                display: none !important;
            }

            /* 2. é¡µé¢è®¾ç½®ï¼šé‡ç½®èƒŒæ™¯å’Œè¾¹è· */
            @page { size: A4; margin: 1.5cm; }
            html, body {
                background-color: #fff !important;
                width: 100%;
                height: auto;
                margin: 0;
                padding: 0;
                overflow: visible !important; /* å…è®¸å†…å®¹æµå‡º */
            }

            /* 3. æ‰“å°å®¹å™¨è®¾ç½®ï¼šå›å½’æ­£å¸¸æ–‡æ¡£æµ (static)ï¼Œä¸ä½¿ç”¨ absolute */
            #print-container {
                display: block !important;
                visibility: visible !important;
                position: static !important; /* å…³é”®ï¼šè®©æµè§ˆå™¨è‡ªåŠ¨æ’ç‰ˆ */
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                font-family: 'Times New Roman', serif;
                color: #000;
                font-size: 11pt;
            }

            /* 4. ç¡®ä¿å†…éƒ¨å…ƒç´ å¯è§ */
            #print-container * {
                visibility: visible !important;
            }

            /* 5. æ ·å¼ç¾åŒ– */
            h1 { font-size: 18pt; font-weight: bold; text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px; color: #000 !important; }
            h2 { font-size: 14pt; font-weight: bold; margin-top: 20px; margin-bottom: 10px; border-left: 5px solid #666; padding-left: 10px; color: #000 !important; page-break-after: avoid; }
            
            .print-table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
                font-size: 10pt;
            }
            .print-table th, .print-table td {
                border: 1px solid #000 !important; /* å¼ºåˆ¶é»‘è‰²è¾¹æ¡† */
                padding: 6px 8px;
                text-align: left;
            }
            .print-table th {
                background-color: #f0f0f0 !important;
                font-weight: bold;
                width: 35%;
                -webkit-print-color-adjust: exact; /* å¼ºåˆ¶æ‰“å°èƒŒæ™¯è‰² */
                print-color-adjust: exact;
            }

            pre.print-results {
                font-family: 'Courier New', monospace;
                font-size: 10pt;
                white-space: pre-wrap;
                word-wrap: break-word;
                border: 1px solid #666;
                padding: 10px;
                margin-top: 10px;
                background: none !important;
                color: #000 !important;
            }

            .print-footer {
                margin-top: 40px;
                text-align: center;
                font-size: 9pt;
                color: #666;
                border-top: 1px solid #ccc;
                padding-top: 10px;
            }
        }
    </style>
</head>
<body class="bg-gray-100 font-sans antialiased">

    <!-- ç½‘é¡µä¸»ä½“å†…å®¹ -->
    <div id="main-content" class="container mx-auto p-4 sm:p-8 max-w-3xl">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">å–·æ²¹å®¹ç§¯å¼å‹ç¼©æœºè®¡ç®—å™¨ v2.3 (é€»è¾‘å¢å¼ºç‰ˆ)</h1>
        
        <div class="flex border-b-2 border-gray-300 mb-0">
            <button id="tab-btn-m2" class="tab-button active">æ¨¡å¼ä¸€: åˆ¶å†·çƒ­æ³µ (ä¼°ç®—)</button>
            <button id="tab-btn-m3" class="tab-button">æ¨¡å¼äºŒ: æ°”ä½“å‹ç¼© (ä¼°ç®—)</button>
        </div>

        <!-- æ¨¡å¼ä¸€ (åˆ¶å†·çƒ­æ³µ) -->
        <div id="tab-content-m2" class="tab-content active">
            <div class="bg-white p-6 sm:p-8">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">æ¨¡å¼ä¸€: åˆ¶å†·çƒ­æ³µ (å–·æ²¹ä¼°ç®—)</h2>
                <form id="calc-form-mode-2">
                    <h2 class="text-2xl font-semibold text-green-700 mb-4 border-b pb-2">1. è¾“å…¥å‚æ•°</h2>
                    <blockquote class="bg-green-50 border-l-4 border-green-500 text-green-800 p-4 mb-4" role="alert">
                        <p><b>è®¡ç®—æ¨¡å‹:</b> åŸºäºç­‰ç†µæ•ˆç‡ (Î·_s)ã€å®¹ç§¯æ•ˆç‡ (Î·_v) å’Œé¢„ä¼°çš„å®é™…æ’æ°”æ¸©åº¦ (T2a) ä¼°ç®—æ€§èƒ½å’Œæ²¹å†·è´Ÿè·ã€‚</p>
                    </blockquote>
                    <div>
                        <fieldset class="border p-4 rounded-lg mb-6">
                            <legend class="font-medium px-2 text-lg">å·¥è´¨ä¸å‹ç¼©æœº</legend>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6">
                                <div class="input-group"><label for="fluid_m2" class="block text-sm font-medium text-gray-700 mb-1">å·¥è´¨ (åˆ¶å†·å‰‚)</label><select id="fluid_m2" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500 bg-white" required><option value="R134a">R134a</option><option value="R245fa" selected>R245fa</option><option value="R1233zd(E)">R1233zd(E)</option><option value="R1234ze(E)">R1234ze(E)</option><option value="R123">R123</option><option value="R22">R22</option><option value="R410A">R410A</option><option value="R32">R32</option><option value="R290">R290</option><option value="R717">R717 (Ammonia)</option><option value="R515B">R515B</option><option value="R142b">R142b</option><option value="R1336mzz(Z)">R1336mzz(Z)</option><option value="R744">R744 (CO2)</option><option value="R600a">R600a (Isobutane)</option><option value="R152a">R152a</option><option value="R454B">R454B</option><option value="R513A">R513A</option><option value="R236fa">R236fa</option><option value="R23">R23</option><option value="R1234yf">R1234yf</option><option value="R1270">R1270 (Propylene)</option><option value="R1150">R1150 (Ethylene)</option></select></div>
                                <pre id="fluid-info-m2" class="text-xs text-gray-600 bg-gray-50 p-3 rounded-md border border-gray-200 mb-3 font-mono md:col-span-2">--- æ­£åœ¨åŠ è½½ç‰©æ€§åº“ ---</pre>
                                <div class="input-group md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-1">ç†è®ºè¾“æ°”é‡æ¨¡å¼</label><div class="flex space-x-4"><label class="inline-flex items-center"><input type="radio" name="flow_mode_m2" id="flow_mode_rpm_m2" value="rpm" class="form-radio" checked><span class="ml-2">æŒ‰è½¬é€Ÿä¸æ’é‡</span></label><label class="inline-flex items-center"><input type="radio" name="flow_mode_m2" id="flow_mode_vol_m2" value="vol" class="form-radio"><span class="ml-2">æŒ‰ä½“ç§¯æµé‡</span></label></div></div>
                                <div id="rpm-inputs-m2"><div class="input-group"><label for="rpm_m2" class="block text-sm font-medium text-gray-700 mb-1">å‹ç¼©æœºè½¬é€Ÿ (RPM)</label><input type="number" id="rpm_m2" value="2900" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" required></div><div class="input-group"><label for="displacement_m2" class="block text-sm font-medium text-gray-700 mb-1">æ¯è½¬æ’é‡ (cmÂ³/rev)</label><input type="number" id="displacement_m2" value="437.5" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" required></div></div>
                                <div id="vol-inputs-m2" style="display: none;"><div class="input-group"><label for="flow_m3h_m2" class="block text-sm font-medium text-gray-700 mb-1">ç†è®ºä½“ç§¯æµé‡ (mÂ³/h)</label><input type="number" id="flow_m3h_m2" value="100" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"></div></div>
                            </div>
                        </fieldset>
                        <fieldset class="border p-4 rounded-lg mb-6">
                            <legend class="font-medium px-2 text-lg">çƒ­åŠ›å­¦å·¥å†µ</legend>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6"><div class="input-group"><label for="temp_evap_m2" class="block text-sm font-medium text-gray-700 mb-1">è’¸å‘é¥±å’Œæ¸©åº¦ (T_e) (Â°C)</label><input type="number" id="temp_evap_m2" value="50" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" required></div><div class="input-group"><label for="temp_cond_m2" class="block text-sm font-medium text-gray-700 mb-1">å†·å‡é¥±å’Œæ¸©åº¦ (T_c) (Â°C)<span class="tooltip">(?)<span class="tooltiptext">å·¥è´¨åœ¨å†·å‡å™¨ä¸­å˜ä¸ºæ¶²ä½“çš„é¥±å’Œæ¸©åº¦ã€‚è¿™å†³å®šäº†ç³»ç»Ÿçš„é«˜å‹ã€‚</span></span></label><input type="number" id="temp_cond_m2" value="125" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" required></div><div class="input-group"><label for="superheat_m2" class="block text-sm font-medium text-gray-700 mb-1">æœ‰æ•ˆè¿‡çƒ­åº¦ (K)</label><input type="number" id="superheat_m2" value="5" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" required></div><div class="input-group"><label for="subcooling_m2" class="block text-sm font-medium text-gray-700 mb-1">è¿‡å†·åº¦ (K)<span class="tooltip">(?)<span class="tooltiptext">å¿…é¡»ä¸ºæ­£æ•°æˆ–0ã€‚æŒ‡å†·å‡å™¨å‡ºå£æ¶²ä½“æ¸©åº¦ä½äºT_cçš„åº¦æ•°ã€‚</span></span></label><input type="number" id="subcooling_m2" value="5" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" required></div></div>
                        </fieldset>
                        <fieldset class="border p-4 rounded-lg mb-6">
                            <legend class="font-medium px-2 text-lg">æ•ˆç‡å‚æ•°</legend>
                            <!-- [æ™ºèƒ½æ•ˆç‡æ¨¡å‹] æ–°å¢å¤é€‰æ¡† -->
                            <div class="input-group md:col-span-2 bg-blue-50 p-3 rounded-lg border border-blue-200">
                                <label class="inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="auto-eff-m2" class="form-checkbox h-5 w-5 text-blue-600">
                                    <span class="ml-2 font-semibold text-blue-800">ä½¿ç”¨ç»éªŒæ•ˆç‡æ¨¡å‹ (æ ¹æ®å·¥å†µè‡ªåŠ¨ä¼°ç®—)</span>
                                </label>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6">
                                <div class="input-group md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-1">æ•ˆç‡åŸºå‡†</label><div class="flex space-x-4"><label class="inline-flex items-center"><input type="radio" name="eff_mode_m2" id="eff_mode_shaft_m2" value="shaft" class="form-radio"><span class="ml-2">åŸºäºè½´åŠŸç‡ (Î·_s)</span></label><label class="inline-flex items-center"><input type="radio" name="eff_mode_m2" id="eff_mode_input_m2" value="input" class="form-radio" checked><span class="ml-2">åŸºäºè¾“å…¥åŠŸç‡ (Î·_total)</span></label></div></div>
                                <div class="input-group"><label for="eta_s_m2" id="eta_s_label_m2" class="block text-sm font-medium text-gray-700 mb-1">æ€»ç­‰ç†µæ•ˆç‡ (Î·_total)<span class="tooltip">(?)<span class="tooltiptext" id="tooltip-eta-s-m2">åŸºäºã€è¾“å…¥åŠŸç‡ã€‘ã€‚Î·_total = ç†è®ºç­‰ç†µåŠŸç‡ / ç”µæœºè¾“å…¥åŠŸç‡ã€‚</span></span></label><input type="number" id="eta_s_m2" value="0.581" step="any" min="0.1" max="1.5" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" required></div>
                                <div class="input-group"><label for="eta_v_m2" class="block text-sm font-medium text-gray-700 mb-1">å®¹ç§¯æ•ˆç‡ (Î·_v)<span class="tooltip">(?)<span class="tooltiptext">Î·_v = å®é™…å¸æ°”ä½“ç§¯æµé‡ / ç†è®ºè¾“æ°”é‡ã€‚</span></span></label><input type="number" id="eta_v_m2" value="0.901" step="any" min="0.1" max="1.5" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" required></div>
                                <div id="motor-eff-group-m2" class="input-group"><label for="motor_eff_m2" class="block text-sm font-medium text-gray-700 mb-1">ç”µæœºæ•ˆç‡</label><input type="number" id="motor_eff_m2" value="0.95" step="0.01" min="0.5" max="1.0" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"></div>
                            </div>
                        </fieldset>
                        <fieldset class="border p-4 rounded-lg bg-yellow-50 border-yellow-400"><legend class="font-medium px-2 text-lg text-yellow-800">å–·æ²¹æ•ˆæœ (å…³é”®è¾“å…¥)</legend><div class="input-group"><label for="temp_discharge_actual_m2" class="block text-sm font-medium text-gray-700 mb-1">é¢„ä¼°çš„å®é™…æ’æ°”æ¸©åº¦ T2a (Â°C)<span class="tooltip">(?)<span class="tooltiptext">è¿™æ˜¯å–·æ²¹æ¨¡å‹çš„æ ¸å¿ƒè¾“å…¥ã€‚æ­¤æ¸©åº¦å¿…é¡»ã€é«˜äºã€‘å†·å‡é¥±å’Œæ¸©åº¦(T_c)ã€‚</span></span></label><input type="number" id="temp_discharge_actual_m2" value="130" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" required></div></fieldset>
                    </div>
                    <div class="mt-8 text-center"><button type="submit" id="calc-button-mode-2" class="w-full md:w-2/3 bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition duration-300 ease-in-out" disabled>æ­£åœ¨åŠ è½½ç‰©æ€§åº“...</button></div>
                </form>
                <div class="mt-8"><h2 class="text-2xl font-semibold text-green-700 mb-4 border-b pb-2">2. è®¡ç®—ç»“æœ</h2><pre id="results-mode-2" class="bg-gray-50 text-gray-900 p-6 rounded-lg shadow-inner overflow-x-auto min-h-[400px] font-mono text-sm">--- è¯·è¾“å…¥å‚æ•°å¹¶ç‚¹å‡»è®¡ç®— ---</pre><div class="mt-4 text-center"><button type="button" id="print-button-mode-2" class="w-full md:w-2/3 bg-gray-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 transition duration-300" disabled>ğŸ–¨ï¸ æ‰“å°æŠ¥å‘Š (A4)</button></div></div>
            </div>
        </div>

        <!-- æ¨¡å¼äºŒ (æ°”ä½“å‹ç¼©) -->
        <div id="tab-content-m3" class="tab-content">
            <div class="bg-white p-6 sm:p-8">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">æ¨¡å¼äºŒ: æ°”ä½“å‹ç¼© (å–·æ²¹ä¼°ç®—)</h2>
                <form id="calc-form-mode-3">
                    <h2 class="text-2xl font-semibold text-indigo-700 mb-4 border-b pb-2">1. è¾“å…¥å‚æ•°</h2>
                    <blockquote class="bg-indigo-50 border-l-4 border-indigo-500 text-indigo-800 p-4 mb-4" role="alert">
                        <p><b>è®¡ç®—æ¨¡å‹:</b> åŸºäºç­‰æ¸©æ•ˆç‡ (Î·_iso) æˆ–ç­‰ç†µæ•ˆç‡ (Î·_s)ã€å®¹ç§¯æ•ˆç‡ (Î·_v) å’Œé¢„ä¼°çš„å®é™…æ’æ°”æ¸©åº¦ (T2a) ä¼°ç®—æ€§èƒ½å’Œæ²¹å†·è´Ÿè·ã€‚</p>
                    </blockquote>
                    <div>
                        <fieldset class="border p-4 rounded-lg mb-6"><legend class="font-medium px-2 text-lg">å·¥è´¨ä¸å‹ç¼©æœº</legend><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6"><div class="input-group"><label for="fluid_m3" class="block text-sm font-medium text-gray-700 mb-1">å·¥è´¨ (æ°”ä½“)</label><select id="fluid_m3" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 bg-white" required><option value="Air" selected>Air (ç©ºæ°”)</option><option value="Nitrogen">Nitrogen (æ°®æ°”)</option><option value="Helium">Helium (æ°¦æ°”)</option><option value="Neon">Neon (æ°–æ°”)</option><option value="Argon">Argon (æ°©æ°”)</option><option value="Water">Water (IAPWS-IF97)</option><option value="R744">R744 (CO2 / äºŒæ°§åŒ–ç¢³)</option><option value="Hydrogen">Hydrogen (æ°¢æ°”)</option><option value="Oxygen">Oxygen (æ°§æ°”)</option><option value="Methane">Methane (ç”²çƒ·)</option></select></div><pre id="fluid-info-m3" class="text-xs text-gray-600 bg-gray-50 p-3 rounded-md border border-gray-200 mb-3 font-mono md:col-span-2">--- æ­£åœ¨åŠ è½½ç‰©æ€§åº“ ---</pre><div class="input-group md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-1">ç†è®ºè¾“æ°”é‡æ¨¡å¼</label><div class="flex space-x-4"><label class="inline-flex items-center"><input type="radio" name="flow_mode_m3" id="flow_mode_rpm_m3" value="rpm" class="form-radio" checked><span class="ml-2">æŒ‰è½¬é€Ÿä¸æ’é‡</span></label><label class="inline-flex items-center"><input type="radio" name="flow_mode_m3" id="flow_mode_vol_m3" value="vol" class="form-radio"><span class="ml-2">æŒ‰ä½“ç§¯æµé‡</span></label></div></div><div id="rpm-inputs-m3"><div class="input-group"><label for="rpm_m3" class="block text-sm font-medium text-gray-700 mb-1">å‹ç¼©æœºè½¬é€Ÿ (RPM)</label><input type="number" id="rpm_m3" value="2900" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500" required></div><div class="input-group"><label for="displacement_m3" class="block text-sm font-medium text-gray-700 mb-1">æ¯è½¬æ’é‡ (cmÂ³/rev)</label><input type="number" id="displacement_m3" value="437.5" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500" required></div></div><div id="vol-inputs-m3" style="display: none;"><div class="input-group"><label for="flow_m3h_m3" class="block text-sm font-medium text-gray-700 mb-1">ç†è®ºä½“ç§¯æµé‡ (mÂ³/h)</label><input type="number" id="flow_m3h_m3" value="100" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"></div></div></div></fieldset>
                        <fieldset class="border p-4 rounded-lg mb-6"><legend class="font-medium px-2 text-lg">çƒ­åŠ›å­¦å·¥å†µ</legend><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6"><div class="input-group"><label for="press_in_m3" class="block text-sm font-medium text-gray-700 mb-1">å¸æ°”å‹åŠ› (bar)</label><input type="number" id="press_in_m3" value="1.0" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500" required></div><div class="input-group"><label for="temp_in_m3" class="block text-sm font-medium text-gray-700 mb-1">å¸æ°”æ¸©åº¦ (Â°C)</label><input type="number" id="temp_in_m3" value="25" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500" required></div><div class="input-group md:col-span-2"><label for="press_out_m3" class="block text-sm font-medium text-gray-700 mb-1">æ’æ°”å‹åŠ› (bar)</label><input type="number" id="press_out_m3" value="8.0" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500" required></div></div></fieldset>
                        <fieldset class="border p-4 rounded-lg mb-6">
                            <legend class="font-medium px-2 text-lg">æ•ˆç‡å‚æ•°</legend>
                            <!-- [æ™ºèƒ½æ•ˆç‡æ¨¡å‹] æ–°å¢å¤é€‰æ¡† -->
                            <div class="input-group md:col-span-2 bg-blue-50 p-3 rounded-lg border border-blue-200">
                                <label class="inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="auto-eff-m3" class="form-checkbox h-5 w-5 text-blue-600">
                                    <span class="ml-2 font-semibold text-blue-800">ä½¿ç”¨ç»éªŒæ•ˆç‡æ¨¡å‹ (æ ¹æ®å·¥å†µè‡ªåŠ¨ä¼°ç®—)</span>
                                </label>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6">
                                <div class="input-group md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-1">åŠŸç‡åŸºå‡†</label><div class="flex space-x-4"><label class="inline-flex items-center"><input type="radio" name="eff_mode_m3" id="eff_mode_shaft_m3" value="shaft" class="form-radio" checked><span class="ml-2">åŸºäºè½´åŠŸç‡</span></label><label class="inline-flex items-center"><input type="radio" name="eff_mode_m3" id="eff_mode_input_m3" value="input" class="form-radio"><span class="ml-2">åŸºäºè¾“å…¥åŠŸç‡</span></label></div></div>
                                <div class="input-group md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-1">æ•ˆç‡ç±»å‹</label><div class="flex space-x-4"><label class="inline-flex items-center"><input type="radio" name="eff_type_m3" id="eff_type_iso_m3" value="isothermal" class="form-radio" checked><span class="ml-2">ç­‰æ¸©æ•ˆç‡ (Î·_iso)</span></label><label class="inline-flex items-center"><input type="radio" name="eff_type_m3" id="eff_type_isen_m3" value="isentropic" class="form-radio"><span class="ml-2">ç­‰ç†µæ•ˆç‡ (Î·_s)</span></label></div></div>
                                <div class="input-group"><label for="eta_iso_m3" id="eta_label_m3" class="block text-sm font-medium text-gray-700 mb-1">ç­‰æ¸©æ•ˆç‡ (Î·_iso)<span class="tooltip">(?)<span class="tooltiptext" id="tooltip-eta_m3">åŸºäºã€è½´åŠŸç‡ã€‘ã€‚Î·_iso = ç†è®ºç­‰æ¸©åŠŸç‡ / å‹ç¼©æœºè½´åŠŸç‡ã€‚</span></span></label><input type="number" id="eta_iso_m3" value="0.75" step="any" min="0.1" max="1.5" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500" required></div>
                                <div class="input-group"><label for="eta_v_m3" class="block text-sm font-medium text-gray-700 mb-1">å®¹ç§¯æ•ˆç‡ (Î·_v)<span class="tooltip">(?)<span class="tooltiptext">Î·_v = å®é™…å¸æ°”ä½“ç§¯æµé‡ / ç†è®ºè¾“æ°”é‡ã€‚</span></span></label><input type="number" id="eta_v_m3" value="0.95" step="any" min="0.1" max="1.5" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500" required></div>
                                <div id="motor-eff-group-m3" class="input-group" style="display: none;"><label for="motor_eff_m3" class="block text-sm font-medium text-gray-700 mb-1">ç”µæœºæ•ˆç‡</label><input type="number" id="motor_eff_m3" value="0.95" step="0.01" min="0.5" max="1.0" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"></div>
                            </div>
                        </fieldset>
                        <fieldset class="border p-4 rounded-lg bg-yellow-50 border-yellow-400"><legend class="font-medium px-2 text-lg text-yellow-800">å–·æ²¹æ•ˆæœ (å…³é”®è¾“å…¥)</legend><div class="input-group"><label for="temp_discharge_actual_m3" class="block text-sm font-medium text-gray-700 mb-1">é¢„ä¼°çš„å®é™…æ’æ°”æ¸©åº¦ T2a (Â°C)<span class="tooltip">(?)<span class="tooltiptext">è¿™æ˜¯å–·æ²¹æ¨¡å‹çš„æ ¸å¿ƒè¾“å…¥ã€‚æ­¤æ¸©åº¦å¿…é¡»ã€é«˜äºã€‘å¸æ°”æ¸©åº¦ (T_in)ã€‚</span></span></label><input type="number" id="temp_discharge_actual_m3" value="85" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500" required></div></fieldset>
                    </div>
                    <div class="mt-8 text-center"><button type="submit" id="calc-button-mode-3" class="w-full md:w-2/3 bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition duration-300 ease-in-out" disabled>æ­£åœ¨åŠ è½½ç‰©æ€§åº“...</button></div>
                </form>
                <div class="mt-8"><h2 class="text-2xl font-semibold text-indigo-700 mb-4 border-b pb-2">2. è®¡ç®—ç»“æœ</h2><pre id="results-mode-3" class="bg-gray-50 text-gray-900 p-6 rounded-lg shadow-inner overflow-x-auto min-h-[400px] font-mono text-sm">--- è¯·è¾“å…¥å‚æ•°å¹¶ç‚¹å‡»è®¡ç®— ---</pre><div class="mt-4 text-center"><button type="button" id="print-button-mode-3" class="w-full md:w-2/3 bg-gray-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 transition duration-300" disabled>ğŸ–¨ï¸ æ‰“å°æŠ¥å‘Š (A4)</button></div></div>
            </div>
        </div>
    </div>

    <!-- [v3.2 Print Fix] é¢„ç½®çš„ã€éšè—çš„æ‰“å°å®¹å™¨ -->
    <div id="print-container" style="display: none;">
        <h1></h1>
        <h2>1. è¾“å…¥å‚æ•°</h2>
        <table class="print-table"></table>
        <h2>2. è®¡ç®—ç»“æœ</h2>
        <pre class="print-results"></pre>
        <p class="print-footer"></p>
    </div>

    <footer class="text-center text-gray-600 text-sm mt-8 pb-4 max-w-3xl mx-auto px-4">
        <p><strong>ç‰ˆæœ¬:</strong> v2.3 (é€»è¾‘å¢å¼ºç‰ˆ)</p>
        <p><strong>ç¼–è€…:</strong> è†ç‚è£ (Jing Yanrong)</p>
        <blockquote class="mt-2 border-l-4 border-gray-300 pl-4 italic">
            ç¼–è€…å·²å°½åŠ›ç¡®ä¿æœ¬è®¡ç®—å™¨ç»“æœçš„å‡†ç¡®æ€§ï¼Œä½†ä¸å¯¹ä»»ä½•å› ä½¿ç”¨æœ¬å·¥å…·è€Œå¯¼è‡´çš„æ½œåœ¨é”™è¯¯æˆ–æŸå¤±æ‰¿æ‹…è´£ä»»ã€‚è®¡ç®—ç»“æœä»…ä¾›å‚è€ƒã€‚
        </blockquote>
    </footer>

    <script type="module" src="js/main.js"></script>

</body>
</html>